<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vinex</title>
  <link rel="icon" href="uploads/logo-main.png">
  <style>
    :root {
      --brand: #2B82C8;
      --brand-dark: #0E4A78;
      --brand-rgb: 43,130,200;
      --brand-dark-rgb: 14,74,120;
      --primary: var(--brand);
      --accent: #4CC3E6;
      --accent-rgb: 76,195,230;
      --bg: #ffffff;
      --bg-light: #f4fbff;
      --text: #0F1724;
      --text-light: #6b7280;
      --border: rgba(var(--brand-dark-rgb),0.08);
      --radius: 10px;
      --shadow: 0 6px 20px rgba(var(--brand-dark-rgb),0.12);
      --transition: 0.22s ease;
      --logo-size: 40px;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Nunito', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 40px 20px;
      background: var(--bg);
      padding-top: 40px;
      padding-bottom: 40px;
    }

    @media (max-width: 520px) {
      body {
        padding: 20px 16px;
      }

      .register-container {
        border-radius: 12px;
        padding: 32px 24px;
      }
    }

    .register-container {
      width: 100%;
      max-width: 480px;
      background: var(--bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 40px 32px;
      position: relative;
      height: auto;
      max-height: none;
      overflow: visible;
      margin: 0 auto;

    }

    .brand-inline {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
      justify-content: center;
    }

    .register-logo {
      width: var(--logo-size);
      height: var(--logo-size);
      object-fit: contain;
    }

    #siteBrandTitle {
      font-weight: 700;
      color: var(--brand);
      font-size: 20px;
      font-family: 'Montserrat', sans-serif;
    }

    .register-header {
      text-align: center;
      margin-bottom: 24px;
    }

    .register-header h1 {
      font-size: 24px;
      margin-bottom: 6px;
      color: var(--primary);
      font-weight: 700;
    }

    .register-header p {
      color: var(--text-light);
      font-size: 13px;
      line-height: 1.5;
    }

    .form-group {
      margin-bottom: 14px;
    }

    .form-group label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-group input {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 14px;
      font-family: 'Nunito', sans-serif;
      transition: var(--transition);
      background: var(--bg-light);
    }

    .form-group input:focus {
      outline: none;
      background: var(--bg);
      border-color: var(--brand);
      box-shadow: 0 0 0 3px rgba(var(--brand-rgb), 0.08);
    }

    .upload-wrapper {
      margin-bottom: 14px;
    }

    .upload-wrapper label {
      display: block;
      font-size: 12px;
      font-weight: 600;
      color: var(--primary);
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .upload-area {
      border: 2px dashed var(--border);
      padding: 16px;
      border-radius: 8px;
      text-align: center;
      color: var(--text-light);
      background: var(--bg-light);
      cursor: pointer;
      transition: var(--transition);
      font-size: 13px;
    }

    .upload-area:hover {
      border-color: var(--brand);
      background: rgba(var(--brand-rgb), 0.02);
    }

    .upload-area input[type="file"] {
      display: none;
    }

    .upload-text {
      font-size: 12px;
    }

    .form-actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .btn-submit {
      flex: 1;
      padding: 10px 14px;
      background: var(--brand);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-submit:hover {
      background: var(--brand-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(var(--brand-rgb), 0.2);
    }

    .btn-back {
      flex: 1;
      padding: 10px 14px;
      background: transparent;
      color: var(--text-light);
      border: 1px solid var(--border);
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      text-decoration: none;
      display: block;
    }

    .btn-back:hover {
      color: var(--brand);
      border-color: var(--brand);
    }

    .form-message {
      padding: 10px;
      border-radius: 8px;
      font-size: 13px;
      margin-bottom: 14px;
      text-align: center;
      display: none;
    }

    .form-message.error {
      background: #fee2e2;
      color: #991b1b;
      display: block;
    }

    .verification-box {
      background: #fffbec;
      border-radius: 8px;
      padding: 16px;
      margin-top: 16px;
      border: 1px solid rgba(242,183,5,0.15);
      display: none;
    }

    .verification-box.show {
      display: block;
    }

    .verification-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--brand-dark);
      margin-bottom: 10px;
    }

    .verification-code {
      background: var(--bg);
      border: 1px solid var(--border);
      padding: 10px;
      border-radius: 8px;
      font-weight: 700;
      color: var(--brand);
      text-align: center;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .verification-message {
      color: var(--text);
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 12px;
    }

    .verification-info {
      background: var(--bg);
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 12px;
      font-size: 13px;
    }

    .verification-info div {
      margin-bottom: 6px;
    }

    .verification-info div:last-child {
      margin-bottom: 0;
    }

    .verification-info label {
      color: var(--text-light);
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .verification-info strong {
      display: block;
      color: var(--text);
      margin-top: 1px;
    }

    .verification-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn-back-to-login {
      position: absolute;
      top: 20px;
      right: 20px;
      padding: 10px 16px;
      background: var(--brand);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .btn-back-to-login:hover {
      background: var(--brand-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(var(--brand-rgb), 0.2);
    }

    .btn-back-login {
      flex: 1;
      padding: 10px 12px;
      background: var(--brand);
      color: #fff;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-height: 38px;
    }

    .btn-back-login:hover {
      background: var(--brand-dark);
      transform: translateY(-2px);
    }

    .btn-contact-admin {
      flex: 1;
      padding: 10px 12px;
      background: #25D366;
      color: #fff;
      border: none;
      border-radius: 8px;
      font-weight: 700;
      font-size: 12px;
      cursor: pointer;
      transition: var(--transition);
      text-align: center;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      min-height: 38px;
      margin-bottom: 10px;
    }

    .btn-contact-admin:hover {
      background: #20BA58;
      transform: translateY(-2px);
    }

    .contact-admin-logo {
      width: 24px;
      height: 24px;
      object-fit: contain;
      border-radius: 4px;
    }

    .admin-logo-input {
      display: none;
    }

    #registerForm {
      display: block;
    }

    #registerForm.hidden {
      display: none;
    }

    @media (max-width: 520px) {
      .register-container {
        padding: 32px 24px;
        max-width: 100%;
        border-radius: 12px 12px 0 0;
        max-height: none;
      }

      .register-header h1 {
        font-size: 22px;
      }

      .verification-actions {
        flex-direction: column;
      }

      .verification-actions button,
      .verification-actions a {
        width: 100%;
      }
    }

    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(var(--brand-rgb), 0.3);
      border-radius: 3px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: rgba(var(--brand-rgb), 0.5);
    }
  </style>
</head>
<body>
  <div class="register-container">
    <div class="brand-inline">
      <img class="register-logo" src="uploads/logo-main.png" alt="logo">
      <p id="siteBrandTitle">Vinex</p>
    </div>

    <div class="register-header">
      <h1>Register</h1>
      <p>Register to explore Vinex micro projects</p>
    </div>

    <div class="form-message" id="formMessage"></div>

    <form id="registerForm">
      <div class="form-group">
        <label>Full Name *</label>
        <input type="text" id="fullName" placeholder="Nama Anda" required>
      </div>

      <div class="form-group">
        <label>Email *</label>
        <input type="email" id="email" placeholder="you@example.com" required>
      </div>

      <div class="form-group">
        <label>University *</label>
        <input type="text" id="university" placeholder="Universitas" required>
      </div>

      <div class="form-group">
        <label>Major *</label>
        <input type="text" id="major" placeholder="Jurusan" required>
      </div>

      <div class="form-group">
        <label>Phone NUmber *</label>
        <input type="tel" id="phone" placeholder="08xxxxxxxxxx" required>
      </div>

      <div class="form-group">
        <label>Product *</label>
        <input type="text" id="product-info" placeholder="Produk" required readonly>
      </div>

      <div class="form-group">
        <label>Price *</label>
        <input type="text" id="price" placeholder="Rp 99.000" required readonly>
      </div>

      <input type="hidden" id="product" name="product" value="portfolio">

      <div class="upload-wrapper">
        <label>Upload Transfer Proof *</label>
        <div class="upload-area" id="uploadArea">
          <input type="file" id="bukti" accept="image/*,.pdf" required>
          <div class="upload-text">üìÅ Click or drop file<br><span style="font-size:11px">JPG, PNG, PDF (Max 5MB)</span></div>
        </div>
      </div>

      <div class="form-actions">
        <a href="index.html" class="btn-back">Back</a>
        <button class="btn-submit" type="submit">Register</button>
      </div>
    </form>

    <div class="verification-box" id="verificationBox">
      <div class="verification-title">‚úì Registration Successful!</div>
      <div class="verification-message">
        Tim admin kami akan melakukan pengecekan dan validasi data Anda. Mohon pastikan untuk memantau email secara berkala karena informasi mengenai status validasi dan aktivasi akun akan diumumkan melalui email yang Anda daftarkan. Untuk informasi lebih lanjut, silakan menghubungi admin melalui WhatsApp yang tersedia di bawah.
      </div>

      <div class="verification-info">
        <div><label>Name</label><strong id="verifyName">-</strong></div>
        <div><label>Email</label><strong id="verifyEmail">-</strong></div>
        <div><label>University</label><strong id="verifyUniversity">-</strong></div>
        <div><label>Total</label><strong id="verifyTotal">-</strong></div>
      </div>

      <div class="verification-actions">
        <button type="button" id="contactAdminBtn" class="btn-contact-admin">
          <img id="adminLogoImg" class="contact-admin-logo" src="uploads/whatsapp.png" alt="admin-logo" style="display:none;">
          <span id="adminBtnText">Contact Admin</span>
        </button>
        <input type="file" id="adminLogoInput" class="admin-logo-input" accept="image/*">
      </div>

      <div class="verification-actions">
        <a href="index.html" class="btn-back-login">Back to Login</a>
      </div>
    </div>
  </div>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
      const registerForm = document.getElementById('registerForm');
      const verificationBox = document.getElementById('verificationBox');
      const uploadArea = document.getElementById('uploadArea');
      const fileInput = document.getElementById('bukti');
      const formMessage = document.getElementById('formMessage');
      const contactAdminBtn = document.getElementById('contactAdminBtn');
      const adminLogoInput = document.getElementById('adminLogoInput');
      const priceInput = document.getElementById('price');
      const descriptionInput = document.getElementById('description');

      // Initialize product information
      document.getElementById('product-info').value = 'Vinex - Platform pengembangan portofolio dan menghubungkan mahasiswa dengan industri';
      priceInput.value = 'Rp 99.000';

      function formatRupiah(x) {
        return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR' }).format(x);
      }



      function showMessage(text, type) {
        formMessage.textContent = text;
        formMessage.className = 'form-message ' + type;
        if (type === 'error') {
          setTimeout(function() {
            formMessage.style.display = 'none';
          }, 4000);
        }
      }

      // upload area
      uploadArea.addEventListener('click', function() {
        fileInput.click();
      });

      uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        uploadArea.style.borderColor = 'var(--brand)';
      });

      uploadArea.addEventListener('dragleave', function() {
        uploadArea.style.borderColor = 'var(--border)';
      });

      uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        uploadArea.style.borderColor = 'var(--border)';
        if (e.dataTransfer.files.length) {
          fileInput.files = e.dataTransfer.files;
        }
      });

      fileInput.addEventListener('change', function() {
        if (this.files.length) {
          uploadArea.innerHTML = '‚úì ' + this.files[0].name;
        }
      });

      contactAdminBtn.addEventListener('click', function() {
        window.open('https://chat.whatsapp.com/FTtZAxlQ8p05miUdCDBHwb' + encodeURIComponent(
          'Halo Admin Vinex, saya ingin bertanya mengenai pendaftaran. Mohon bantuan.'
        ), '_blank');
      });

      registerForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const name = document.getElementById('fullName').value.trim();
        const email = document.getElementById('email').value.trim();
        const university = document.getElementById('university').value.trim();
        const major = document.getElementById('major').value.trim();
        const phone = document.getElementById('phone').value.trim();
        
        const productLabel = 'Vinex - Value Integration Exchange';
        const price = 99000;

        if (!name || !email || !university || !major || !phone || !fileInput.files.length) {
          showMessage('Lengkapi semua kolom dan unggah bukti transfer.', 'error');
          return;
        }

        const file = fileInput.files[0];
        if (file.size > 5 * 1024 * 1024) {
          showMessage('File terlalu besar (Maks 5MB)', 'error');
          return;
        }

        const reader = new FileReader();
        reader.onload = function(ev) {
          const dataUrl = ev.target.result;

          const item = {
            name: name,
            email: email,
            university: university,
            major: major,
            phone: phone,
            product: 'portfolio',
            productLabel: productLabel,
            price: price,
            proofFileName: file.name,
            proofDataUrl: dataUrl,
            status: 'Menunggu Verifikasi Email',
            createdAt: new Date().toISOString(),
            emailVerified: false
          };

          try {
            const raw = localStorage.getItem('registrations') || '[]';
            const arr = JSON.parse(raw);
            arr.push(item);
            localStorage.setItem('registrations', JSON.stringify(arr));

            // Simpan data user terdaftar dengan email sebagai key
            const userRegistry = JSON.parse(localStorage.getItem('userRegistry') || '{}');
            userRegistry[email] = {
              fullName: name,
              email: email,
              university: university,
              major: major,
              phone: phone,
              skills: [],
              bio: '',
              registeredAt: new Date().toISOString(),
              isRegistered: true
            };
            localStorage.setItem('userRegistry', JSON.stringify(userRegistry));
          } catch (err) {
            console.error(err);
          }

          // Update verification box
          document.getElementById('verifyName').textContent = name;
          document.getElementById('verifyEmail').textContent = email;
          document.getElementById('verifyUniversity').textContent = university;
          document.getElementById('verifyTotal').textContent = formatRupiah(price);

          // Hide form, show verification box
          registerForm.classList.add('hidden');
          verificationBox.classList.add('show');
        };

        reader.readAsDataURL(file);
      });
    });
  </script>
</body>
</html>
